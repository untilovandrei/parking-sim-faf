<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>Phaser - Making your first game, part 1</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
	<style type="text/css">
		body {
			margin: 0;
		}
	</style>
</head>

<body>

	<script type="text/javascript">
		var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', {
			preload: preload,
			create: create,
			update: update
		});

		function preload() {

			game.load.image('player', 'assets/car.png');
			game.load.image('star', 'assets/demoscene/star2.png');
			game.load.image('baddie', 'assets/sprites/space-baddie.png');
			game.load.atlas('lazer', 'assets/games/defender/laser.png', 'assets/games/defender/laser.json');

		}

		// var stars;
		// var baddies;
		var lazers;
		var player;
		var cursors;
		var fireButton;
		var bulletTime = 0;
		var frameTime = 0;
		var frames;
		var prevCamX = 0;

		function create() {

			game.world.setBounds(0, 0, 800, 600);

			frames = Phaser.Animation.generateFrameNames('frame', 2, 30, '', 2);
			frames.unshift('frame02');

			stars = game.add.group();

			// for (var i = 0; i < 128; i++) {
			// 	stars.create(game.world.randomX, game.world.randomY, 'star');
			// }
			//
			// baddies = game.add.group();
			//
			// for (var i = 0; i < 16; i++) {
			// 	baddies.create(game.world.randomX, game.world.randomY, 'baddie');
			// }

			lazers = game.add.group();

			player = game.add.sprite(400, 600, 'player');

			game.camera.follow(player, Phaser.Camera.FOLLOW_LOCKON, 0.1);

			cursors = game.input.keyboard.createCursorKeys();
		}

		function update() {
			player.y -= 2;

			if (cursors.left.isDown && player.x == 400 && player.y < 500) {
				player.x -= 35;
				player = game.add.sprite(400, 600, 'player');
				cursors.left.isDown = false;
			} else if (cursors.right.isDown && player.x == 400 && player.y < 500) {
				player.x += 35;
				player = game.add.sprite(400, 600, 'player');
				cursors.right.isDown = false;
			}

			if (player.y == -40) {
				player = game.add.sprite(400, 600, 'player');
			}
		}
	</script>

</body>

</html>
